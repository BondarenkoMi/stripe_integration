<html>
  <head>
    <title>Список товаров</title>
  </head>
  <body>
    <header>
      <ul>
        <li><a href="{% url 'item_list' %}">Список товаров</a></li>
        <li><a href="{% url 'cart' %}">Корзина</a></li>
      </ul>
    </header>
    {% for item in items %}
        <div>
            <h2><a href="{% url 'item_detail' item.id %}">{{ item.name }}</a></h2>
            <p>{{ item.description }}</p>
            <p>{{ item.price }} $</p>
            <button id="add-to-cart{{ item.id }}">Добавить в корзину</button>
              <script type="text/javascript">
                var addToCartButton = document.getElementById('add-to-cart{{ item.id }}');
                addToCartButton.addEventListener('click', function() {
                  fetch("{% url 'add_to_cart' item.id %}", {method: 'GET'})
                  .then(response => {
                    if (response.ok) {
                      alert('Товар добавлен в корзину')
                    } else {
                      alert('Ошибка при добавлении товара')
                    }
                  })
                });
              </script>
              <hr>
        </div>
        {% endfor %}
  </body>
</html>
